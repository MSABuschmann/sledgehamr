<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sledgehamr: source/local_regrid/local_regrid.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sledgehamr
   </div>
   <div id="projectbrief">An AMReX-based code to simulate the dynamics of coupled scalar fields on a 3-dimensional adaptive mesh.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_07cd12865425c865bb89f648bb317ae3.html">local_regrid</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">local_regrid.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="local__regrid_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef SLEDGEHAMR_LOCAL_REGRID_H_</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define SLEDGEHAMR_LOCAL_REGRID_H_</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;boost/multi_array.hpp&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sledgehamr_8h.html">sledgehamr.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="unique__layout_8h.html">unique_layout.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="location_8h.html">location.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacesledgehamr.html">sledgehamr</a> {</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">class </span>Sledgehamr;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">class </span>UniqueLayout;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">class </span>Location;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html">   18</a></span>&#160;<span class="keyword">class </span><a class="code" href="classsledgehamr_1_1LocalRegrid.html">LocalRegrid</a> {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a48a0392601adc7046203719af5feb824">LocalRegrid</a>(<a class="code" href="classsledgehamr_1_1Sledgehamr.html">Sledgehamr</a>* owner);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a4458da4a915248888078544b767c6b24">AttemptRegrid</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#ad8209f8ed254d084ef0c85d17334a84b">DidGlobalRegrid</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#aca8f2a065d1f69ad66d46eef5f01d910">InitializeLayout</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> max_lev);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#ad1d361cc8d3d5cdf88a3b2af70b98235">ClearLayout</a>();</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a54eaba36170ad1032ffa996aa1823ef0">FinalizeLayout</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#acf96edb1e54961ac32416d58020bd1d2">WrapIndices</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#ab8054c3efb82b28b33e3357bda47f3ee">JoinBoxArrays</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev, amrex::BoxArray&amp; ba);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a7abc012848cab999afceb48d34ba637f">AddBoxes</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev, amrex::BoxArray&amp; ba);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#aa3c39f4e8b15c13b471f68e36a9dc33f">FixNesting</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a7ab0a5321f0b195e2b151783bcde5fa7">AddToLayout</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev, <span class="keyword">const</span> <span class="keywordtype">int</span> thread, <span class="keyword">const</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <span class="keywordtype">int</span> j,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">int</span> k);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a4e903f8bbe42b29f94666c569e734bee">   39</a></span>&#160;    std::vector&lt;bool&gt; <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a4e903f8bbe42b29f94666c569e734bee">do_global_regrid</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a8d0f98de185f108dae15af7e2997d886">   44</a></span>&#160;    std::vector&lt; std::vector&lt;int&gt; &gt; <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a8d0f98de185f108dae15af7e2997d886">comm_matrix</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">/* @brief Enum with possible course of actions after a veto.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7b">   49</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7b">VetoResult</a> {</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7bab74034a8953a287161c018af9d99208e">   50</a></span>&#160;        <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7bab74034a8953a287161c018af9d99208e">DoGlobalRegrid</a> = 0,</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7bae9e7deadf6c3947aa59dad71e17a0877">   51</a></span>&#160;        <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7bae9e7deadf6c3947aa59dad71e17a0877">DoNoRegrid</a> = 1,</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7ba86d437133251dcb12a6ce5cd3db39593">   52</a></span>&#160;        <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7ba86d437133251dcb12a6ce5cd3db39593">DoLocalRegrid</a> = 2,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    };</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a3bfc34e198cf1d9091ae557b508c3b83">Prechecks</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#abd2eaafd8b0ef4d31171234e56bbbc62">InitializeLocalRegrid</a>();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a7fdb62c58cea11f1be4fd4db3d827509">ParseInput</a>();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#aa044dbf92775ab6f8ad67ddca9be6765">CreateCommMatrix</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#acbdf638db8837580b881637a3b5871d4">DoAttemptRegrid</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#aa728f1d2fe1519e19006258a6f3dd2af">DetermineAllBoxArrays</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#ab78dd484cbf81ffacfc4a8901a3248ec">DetermineNewBoxArray</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a34e74dd5fc82512098f9516ab1660221">FixAllNesting</a>();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a5c5a104f1c94bd81627803b13225c32e">JoinAllBoxArrays</a>(std::vector&lt;amrex::BoxArray&gt;&amp; box_arrays);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#aefb58fcf06a2c658aec35d9b175440d1">AddAllBoxes</a>(std::vector&lt;amrex::BoxArray&gt;&amp; box_arrays);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    amrex::BoxArray <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a91da1033161cc643d7e352c845a81b85">WrapBoxArray</a>(amrex::BoxArray&amp; ba, <span class="keywordtype">int</span> N);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a1e4dfcab9bf143c7d284387c643c66fe">GetBoxCoarseFineBorders</a>(</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keyword">const</span> amrex::Box&amp; tilebox, <span class="keyword">const</span> amrex::IntVect&amp; c0,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keyword">const</span> amrex::IntVect&amp; c1, <span class="keyword">const</span> <span class="keywordtype">int</span> lev,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        boost::multi_array&lt;bool, 3&gt;&amp; border);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a8acdc638840f81d22adff7ad9bd1f4cf">TagAndMeasure</a>(</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keyword">const</span> amrex::Dim3&amp; lo, <span class="keyword">const</span> amrex::Dim3&amp; hi, <span class="keywordtype">int</span> remaining,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keyword">const</span> amrex::Array4&lt;char&gt;&amp; tag_arr, <span class="keyword">const</span> amrex::IntVect&amp; c0,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keyword">const</span> amrex::IntVect&amp; c1, <span class="keyword">const</span> <span class="keywordtype">int</span> lev, <span class="keyword">const</span> <span class="keywordtype">int</span> ibff,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> bff, boost::multi_array&lt;bool, 3&gt;&amp; border,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        std::vector&lt;Location&gt;&amp; closest_locations, <span class="keyword">const</span> <span class="keywordtype">double</span> threshold,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> omp_thread_num);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a7904cbeebaf630718c2fd6c358b0ffab">CheckBorders</a>(</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keyword">const</span> amrex::IntVect&amp; ci, <span class="keyword">const</span> amrex::IntVect&amp; c0,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keyword">const</span> amrex::IntVect&amp; c1, <span class="keyword">const</span> <span class="keywordtype">int</span> ibff, <span class="keyword">const</span> <span class="keywordtype">double</span> bff,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordtype">int</span> remaining, <span class="keyword">const</span> <span class="keywordtype">int</span> lev, boost::multi_array&lt;bool, 3&gt;&amp; border,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        std::vector&lt;Location&gt;&amp; closest_locations, <span class="keyword">const</span> <span class="keywordtype">double</span> threshold,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> omp_thread_num);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a3a0ce70c479608f2786a4706a1e28174">CheckThresholds</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev, amrex::BoxArray&amp; box_array);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a5a4c4e0124cce6e52a2d31d422cd1867">ComputeLatestPossibleRegridTime</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> l, <span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a8f0308e5b708bddbedfabc7d5462507b">CheckForVeto</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                      std::vector&lt;amrex::BoxArray&gt;&amp; box_arrays);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7b">VetoResult</a> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a69abb9abd18afb23af2854dab85b325e">DealWithVeto</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> lev);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a3d091ebbe33a613e98ac5e0a6584f7d9">   97</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a3d091ebbe33a613e98ac5e0a6584f7d9">volume_threshold_accumulated</a> = 1.1;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#ae7e235329d39882b756791f9e94e609d">  102</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#ae7e235329d39882b756791f9e94e609d">volume_threshold_single</a>      = 1.05;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a5e86a8af0dd02440edea03389daeb1d3">  106</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a5e86a8af0dd02440edea03389daeb1d3">veto_level</a> = -1;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a22ed6ede76749d7a30af53b4e996679b">  110</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a22ed6ede76749d7a30af53b4e996679b">force_global_regrid_at_restart</a> = 0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a713ec6e07916351b8b41ecab3f2e2a17">  114</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a713ec6e07916351b8b41ecab3f2e2a17">max_local_regrids</a> = 10;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a042da77091f22870797a9d406fa12506">  118</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a042da77091f22870797a9d406fa12506">nregrids</a> = 0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a8403a32f1028bda506f2e2f4ea7e7eef">  122</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a8403a32f1028bda506f2e2f4ea7e7eef">n_error_buf</a> = 1;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#aa13a330b0df260418a96b950fb3446bc">  127</a></span>&#160;    std::vector&lt;long long&gt; <a class="code" href="classsledgehamr_1_1LocalRegrid.html#aa13a330b0df260418a96b950fb3446bc">last_numPts</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#abb324e0d3669efb0a2337b69892ef957">  131</a></span>&#160;    std::vector&lt;bool&gt; <a class="code" href="classsledgehamr_1_1LocalRegrid.html#abb324e0d3669efb0a2337b69892ef957">no_local_regrid</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#ab5c0c64729d05d204f461d223d01bc72">  136</a></span>&#160;    std::vector&lt; std::vector&lt;int&gt; &gt; <a class="code" href="classsledgehamr_1_1LocalRegrid.html#ab5c0c64729d05d204f461d223d01bc72">wrapped_index</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a7c65ca82aff444f6e0ec107f092d970e">  140</a></span>&#160;    std::vector&lt;double&gt; <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a7c65ca82aff444f6e0ec107f092d970e">latest_possible_regrid_time</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a7979ef82194a55c08f939f5cfd33d943">  145</a></span>&#160;    std::vector&lt;double&gt; <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a7979ef82194a55c08f939f5cfd33d943">min_distance</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a48b38ea21c94615db481b11a56fadd9f">  149</a></span>&#160;    std::vector&lt; std::vector&lt; std::unique_ptr&lt;UniqueLayout&gt; &gt; &gt; <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a48b38ea21c94615db481b11a56fadd9f">layouts</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classsledgehamr_1_1LocalRegrid.html#a4d60672b3f1690a0b299a97b36358648">  153</a></span>&#160;    <a class="code" href="classsledgehamr_1_1Sledgehamr.html">Sledgehamr</a>* <a class="code" href="classsledgehamr_1_1LocalRegrid.html#a4d60672b3f1690a0b299a97b36358648">sim</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;};</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}; <span class="comment">// namespace sledgehamr</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// SLEDGEHAMR_LOCAL_REGRID_H_</span></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html">sledgehamr::LocalRegrid</a></div><div class="ttdoc">Class to perform a local regrid (if possible).</div><div class="ttdef"><b>Definition:</b> local_regrid.h:18</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a042da77091f22870797a9d406fa12506"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a042da77091f22870797a9d406fa12506">sledgehamr::LocalRegrid::nregrids</a></div><div class="ttdeci">int nregrids</div><div class="ttdoc">Counts number of consecutive local regrids.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:118</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a1e4dfcab9bf143c7d284387c643c66fe"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a1e4dfcab9bf143c7d284387c643c66fe">sledgehamr::LocalRegrid::GetBoxCoarseFineBorders</a></div><div class="ttdeci">int GetBoxCoarseFineBorders(const amrex::Box &amp;tilebox, const amrex::IntVect &amp;c0, const amrex::IntVect &amp;c1, const int lev, boost::multi_array&lt; bool, 3 &gt; &amp;border)</div><div class="ttdoc">Determines whether a box has neighbouring coarse/fine boundaries.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:470</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a22ed6ede76749d7a30af53b4e996679b"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a22ed6ede76749d7a30af53b4e996679b">sledgehamr::LocalRegrid::force_global_regrid_at_restart</a></div><div class="ttdeci">bool force_global_regrid_at_restart</div><div class="ttdoc">If flag set to true we will skip the local regrid once.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:110</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a34e74dd5fc82512098f9516ab1660221"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a34e74dd5fc82512098f9516ab1660221">sledgehamr::LocalRegrid::FixAllNesting</a></div><div class="ttdeci">void FixAllNesting()</div><div class="ttdoc">Ensures that all levels are properly nested within the lower levels.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:182</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a3a0ce70c479608f2786a4706a1e28174"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a3a0ce70c479608f2786a4706a1e28174">sledgehamr::LocalRegrid::CheckThresholds</a></div><div class="ttdeci">bool CheckThresholds(const int lev, amrex::BoxArray &amp;box_array)</div><div class="ttdoc">Checks all thresholds and determines whether we should continue with the local regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:217</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a3bfc34e198cf1d9091ae557b508c3b83"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a3bfc34e198cf1d9091ae557b508c3b83">sledgehamr::LocalRegrid::Prechecks</a></div><div class="ttdeci">bool Prechecks(const int lev)</div><div class="ttdoc">Checks pre-conditions whether we even need to attempt a local regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:107</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a3d091ebbe33a613e98ac5e0a6584f7d9"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a3d091ebbe33a613e98ac5e0a6584f7d9">sledgehamr::LocalRegrid::volume_threshold_accumulated</a></div><div class="ttdeci">double volume_threshold_accumulated</div><div class="ttdoc">Strong threshold that decide whether we want to do a local or global regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:97</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a4458da4a915248888078544b767c6b24"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a4458da4a915248888078544b767c6b24">sledgehamr::LocalRegrid::AttemptRegrid</a></div><div class="ttdeci">bool AttemptRegrid(const int lev)</div><div class="ttdoc">Perform a local regrid on level lev after checking various criteria.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:22</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a48a0392601adc7046203719af5feb824"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a48a0392601adc7046203719af5feb824">sledgehamr::LocalRegrid::LocalRegrid</a></div><div class="ttdeci">LocalRegrid(Sledgehamr *owner)</div><div class="ttdoc">Initalize all needed structures.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:8</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a48b38ea21c94615db481b11a56fadd9f"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a48b38ea21c94615db481b11a56fadd9f">sledgehamr::LocalRegrid::layouts</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::unique_ptr&lt; UniqueLayout &gt; &gt; &gt; layouts</div><div class="ttdoc">Vector of UniqueLayouts for each level and each core.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:149</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a4d60672b3f1690a0b299a97b36358648"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a4d60672b3f1690a0b299a97b36358648">sledgehamr::LocalRegrid::sim</a></div><div class="ttdeci">Sledgehamr * sim</div><div class="ttdoc">Pointer to the simulation.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:153</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a4e903f8bbe42b29f94666c569e734bee"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a4e903f8bbe42b29f94666c569e734bee">sledgehamr::LocalRegrid::do_global_regrid</a></div><div class="ttdeci">std::vector&lt; bool &gt; do_global_regrid</div><div class="ttdoc">Flag that will be checked the TimeStepper module to force a global regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:39</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a54eaba36170ad1032ffa996aa1823ef0"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a54eaba36170ad1032ffa996aa1823ef0">sledgehamr::LocalRegrid::FinalizeLayout</a></div><div class="ttdeci">void FinalizeLayout(const int lev)</div><div class="ttdoc">Synchronizes all layout structures across OpenMP threads and MPI ranks for a particular level.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:97</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a5a4c4e0124cce6e52a2d31d422cd1867"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a5a4c4e0124cce6e52a2d31d422cd1867">sledgehamr::LocalRegrid::ComputeLatestPossibleRegridTime</a></div><div class="ttdeci">void ComputeLatestPossibleRegridTime(const int l, const int lev)</div><div class="ttdoc">Computes the most pessimistiv time by which we should have performed any regrid or otherwise we run r...</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:256</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a5c5a104f1c94bd81627803b13225c32e"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a5c5a104f1c94bd81627803b13225c32e">sledgehamr::LocalRegrid::JoinAllBoxArrays</a></div><div class="ttdeci">void JoinAllBoxArrays(std::vector&lt; amrex::BoxArray &gt; &amp;box_arrays)</div><div class="ttdoc">Combines all BoxArray's on each level.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:192</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a5e77b4e9b1abddac86fca72caf4c6f7b"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7b">sledgehamr::LocalRegrid::VetoResult</a></div><div class="ttdeci">VetoResult</div><div class="ttdef"><b>Definition:</b> local_regrid.h:49</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a5e77b4e9b1abddac86fca72caf4c6f7ba86d437133251dcb12a6ce5cd3db39593"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7ba86d437133251dcb12a6ce5cd3db39593">sledgehamr::LocalRegrid::DoLocalRegrid</a></div><div class="ttdeci">@ DoLocalRegrid</div><div class="ttdef"><b>Definition:</b> local_regrid.h:52</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a5e77b4e9b1abddac86fca72caf4c6f7bab74034a8953a287161c018af9d99208e"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7bab74034a8953a287161c018af9d99208e">sledgehamr::LocalRegrid::DoGlobalRegrid</a></div><div class="ttdeci">@ DoGlobalRegrid</div><div class="ttdef"><b>Definition:</b> local_regrid.h:50</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a5e77b4e9b1abddac86fca72caf4c6f7bae9e7deadf6c3947aa59dad71e17a0877"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a5e77b4e9b1abddac86fca72caf4c6f7bae9e7deadf6c3947aa59dad71e17a0877">sledgehamr::LocalRegrid::DoNoRegrid</a></div><div class="ttdeci">@ DoNoRegrid</div><div class="ttdef"><b>Definition:</b> local_regrid.h:51</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a5e86a8af0dd02440edea03389daeb1d3"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a5e86a8af0dd02440edea03389daeb1d3">sledgehamr::LocalRegrid::veto_level</a></div><div class="ttdeci">int veto_level</div><div class="ttdoc">Lowest level that would rather do a global regrid than a local.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:106</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a69abb9abd18afb23af2854dab85b325e"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a69abb9abd18afb23af2854dab85b325e">sledgehamr::LocalRegrid::DealWithVeto</a></div><div class="ttdeci">VetoResult DealWithVeto(const int lev)</div><div class="ttdoc">Determines the best course of action in case the local regrid was vetoed. This could be either to do ...</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:307</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a713ec6e07916351b8b41ecab3f2e2a17"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a713ec6e07916351b8b41ecab3f2e2a17">sledgehamr::LocalRegrid::max_local_regrids</a></div><div class="ttdeci">int max_local_regrids</div><div class="ttdoc">How often we are allowed to do a local regrid in a row.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:114</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a7904cbeebaf630718c2fd6c358b0ffab"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a7904cbeebaf630718c2fd6c358b0ffab">sledgehamr::LocalRegrid::CheckBorders</a></div><div class="ttdeci">void CheckBorders(const amrex::IntVect &amp;ci, const amrex::IntVect &amp;c0, const amrex::IntVect &amp;c1, const int ibff, const double bff, int remaining, const int lev, boost::multi_array&lt; bool, 3 &gt; &amp;border, std::vector&lt; Location &gt; &amp;closest_locations, const double threshold, const int omp_thread_num)</div><div class="ttdoc">Given a location we measure the distance to all adjacent coarse/fine boundaries. We add to our layout...</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:560</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a7979ef82194a55c08f939f5cfd33d943"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a7979ef82194a55c08f939f5cfd33d943">sledgehamr::LocalRegrid::min_distance</a></div><div class="ttdeci">std::vector&lt; double &gt; min_distance</div><div class="ttdoc">Minimum distance of a tagged cell to a coarse/fine boundary for each OpenMP thread.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:145</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a7ab0a5321f0b195e2b151783bcde5fa7"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a7ab0a5321f0b195e2b151783bcde5fa7">sledgehamr::LocalRegrid::AddToLayout</a></div><div class="ttdeci">void AddToLayout(const int lev, const int thread, const int i, const int j, const int k)</div><div class="ttdoc">Adds a particular box to the layout structure.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:88</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a7abc012848cab999afceb48d34ba637f"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a7abc012848cab999afceb48d34ba637f">sledgehamr::LocalRegrid::AddBoxes</a></div><div class="ttdeci">void AddBoxes(const int lev, amrex::BoxArray &amp;ba)</div><div class="ttdoc">Explicitly add boxes to a given level and fill it with data.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:762</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a7c65ca82aff444f6e0ec107f092d970e"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a7c65ca82aff444f6e0ec107f092d970e">sledgehamr::LocalRegrid::latest_possible_regrid_time</a></div><div class="ttdeci">std::vector&lt; double &gt; latest_possible_regrid_time</div><div class="ttdoc">Contains the time by which we should have done a regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:140</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a7fdb62c58cea11f1be4fd4db3d827509"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a7fdb62c58cea11f1be4fd4db3d827509">sledgehamr::LocalRegrid::ParseInput</a></div><div class="ttdeci">void ParseInput()</div><div class="ttdoc">Parses all input parameters related to a local regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:409</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a8403a32f1028bda506f2e2f4ea7e7eef"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a8403a32f1028bda506f2e2f4ea7e7eef">sledgehamr::LocalRegrid::n_error_buf</a></div><div class="ttdeci">int n_error_buf</div><div class="ttdoc">Size of error buffer.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:122</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a8acdc638840f81d22adff7ad9bd1f4cf"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a8acdc638840f81d22adff7ad9bd1f4cf">sledgehamr::LocalRegrid::TagAndMeasure</a></div><div class="ttdeci">void TagAndMeasure(const amrex::Dim3 &amp;lo, const amrex::Dim3 &amp;hi, int remaining, const amrex::Array4&lt; char &gt; &amp;tag_arr, const amrex::IntVect &amp;c0, const amrex::IntVect &amp;c1, const int lev, const int ibff, const double bff, boost::multi_array&lt; bool, 3 &gt; &amp;border, std::vector&lt; Location &gt; &amp;closest_locations, const double threshold, const int omp_thread_num)</div><div class="ttdoc">Finds tagged cells within a box and measures its distance of any coarse/fine boundary.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:516</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a8d0f98de185f108dae15af7e2997d886"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a8d0f98de185f108dae15af7e2997d886">sledgehamr::LocalRegrid::comm_matrix</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; comm_matrix</div><div class="ttdoc">MPI communication matrix. Look-up table used by the UniqueLayout class.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:44</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a8f0308e5b708bddbedfabc7d5462507b"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a8f0308e5b708bddbedfabc7d5462507b">sledgehamr::LocalRegrid::CheckForVeto</a></div><div class="ttdeci">bool CheckForVeto(const int lev, std::vector&lt; amrex::BoxArray &gt; &amp;box_arrays)</div><div class="ttdoc">Indentifies whether any part of the code wants to veto the local regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:286</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_a91da1033161cc643d7e352c845a81b85"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#a91da1033161cc643d7e352c845a81b85">sledgehamr::LocalRegrid::WrapBoxArray</a></div><div class="ttdeci">amrex::BoxArray WrapBoxArray(amrex::BoxArray &amp;ba, int N)</div><div class="ttdoc">Wraps a box array accross periodic boundary conditions.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:736</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_aa044dbf92775ab6f8ad67ddca9be6765"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#aa044dbf92775ab6f8ad67ddca9be6765">sledgehamr::LocalRegrid::CreateCommMatrix</a></div><div class="ttdeci">void CreateCommMatrix()</div><div class="ttdoc">Creates a N x N communication matrix M_{ij} between N MPI ranks. The i-th MPI rank talks to the M_{ij...</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:423</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_aa13a330b0df260418a96b950fb3446bc"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#aa13a330b0df260418a96b950fb3446bc">sledgehamr::LocalRegrid::last_numPts</a></div><div class="ttdeci">std::vector&lt; long long &gt; last_numPts</div><div class="ttdoc">Number of cells contained in each level after the last global regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:127</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_aa3c39f4e8b15c13b471f68e36a9dc33f"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#aa3c39f4e8b15c13b471f68e36a9dc33f">sledgehamr::LocalRegrid::FixNesting</a></div><div class="ttdeci">void FixNesting(const int lev)</div><div class="ttdoc">Will expand lower level locally to ensure the fine level is nested properly within.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:690</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_aa728f1d2fe1519e19006258a6f3dd2af"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#aa728f1d2fe1519e19006258a6f3dd2af">sledgehamr::LocalRegrid::DetermineAllBoxArrays</a></div><div class="ttdeci">void DetermineAllBoxArrays(const int lev)</div><div class="ttdoc">Determines new layout on all levels based on taggin criteria.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:170</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_ab5c0c64729d05d204f461d223d01bc72"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#ab5c0c64729d05d204f461d223d01bc72">sledgehamr::LocalRegrid::wrapped_index</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; wrapped_index</div><div class="ttdoc">Look-up table of wrapped indices for periodic boundary conditions.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:136</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_ab78dd484cbf81ffacfc4a8901a3248ec"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#ab78dd484cbf81ffacfc4a8901a3248ec">sledgehamr::LocalRegrid::DetermineNewBoxArray</a></div><div class="ttdeci">double DetermineNewBoxArray(const int lev)</div><div class="ttdoc">Tags cells on a level and measure distance to coarse/fine boundary. If the tagged cell is too close w...</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:619</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_ab8054c3efb82b28b33e3357bda47f3ee"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#ab8054c3efb82b28b33e3357bda47f3ee">sledgehamr::LocalRegrid::JoinBoxArrays</a></div><div class="ttdeci">void JoinBoxArrays(const int lev, amrex::BoxArray &amp;ba)</div><div class="ttdoc">Joins BoxArray's from multiple nodes. Simplifies box lists only locally for efficiency.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:71</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_abb324e0d3669efb0a2337b69892ef957"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#abb324e0d3669efb0a2337b69892ef957">sledgehamr::LocalRegrid::no_local_regrid</a></div><div class="ttdeci">std::vector&lt; bool &gt; no_local_regrid</div><div class="ttdoc">If we want to skip the local regrid entirely at a given level.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:131</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_abd2eaafd8b0ef4d31171234e56bbbc62"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#abd2eaafd8b0ef4d31171234e56bbbc62">sledgehamr::LocalRegrid::InitializeLocalRegrid</a></div><div class="ttdeci">void InitializeLocalRegrid()</div><div class="ttdoc">Sets up everything needed prior to a local regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:153</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_aca8f2a065d1f69ad66d46eef5f01d910"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#aca8f2a065d1f69ad66d46eef5f01d910">sledgehamr::LocalRegrid::InitializeLayout</a></div><div class="ttdeci">void InitializeLayout(const int max_lev)</div><div class="ttdoc">Creates all layout structures needed for the local regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:50</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_acbdf638db8837580b881637a3b5871d4"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#acbdf638db8837580b881637a3b5871d4">sledgehamr::LocalRegrid::DoAttemptRegrid</a></div><div class="ttdeci">bool DoAttemptRegrid(const int lev)</div><div class="ttdoc">Attempts a local regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:377</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_acf96edb1e54961ac32416d58020bd1d2"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#acf96edb1e54961ac32416d58020bd1d2">sledgehamr::LocalRegrid::WrapIndices</a></div><div class="ttdeci">void WrapIndices(const int lev)</div><div class="ttdoc">Wraps box indicies across the periodic boundary conditions.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:443</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_ad1d361cc8d3d5cdf88a3b2af70b98235"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#ad1d361cc8d3d5cdf88a3b2af70b98235">sledgehamr::LocalRegrid::ClearLayout</a></div><div class="ttdeci">void ClearLayout()</div><div class="ttdoc">Cleans up all layout structures after the local regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:62</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_ad8209f8ed254d084ef0c85d17334a84b"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#ad8209f8ed254d084ef0c85d17334a84b">sledgehamr::LocalRegrid::DidGlobalRegrid</a></div><div class="ttdeci">void DidGlobalRegrid(const int lev)</div><div class="ttdoc">To be called if a global regrid on level lev has been performed. Needed in case this LocalRegrid modu...</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:34</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_ae7e235329d39882b756791f9e94e609d"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#ae7e235329d39882b756791f9e94e609d">sledgehamr::LocalRegrid::volume_threshold_single</a></div><div class="ttdeci">double volume_threshold_single</div><div class="ttdoc">Weak threshold that decide whether we want to do a local or global regrid.</div><div class="ttdef"><b>Definition:</b> local_regrid.h:102</div></div>
<div class="ttc" id="aclasssledgehamr_1_1LocalRegrid_html_aefb58fcf06a2c658aec35d9b175440d1"><div class="ttname"><a href="classsledgehamr_1_1LocalRegrid.html#aefb58fcf06a2c658aec35d9b175440d1">sledgehamr::LocalRegrid::AddAllBoxes</a></div><div class="ttdeci">void AddAllBoxes(std::vector&lt; amrex::BoxArray &gt; &amp;box_arrays)</div><div class="ttdoc">Adds all boxes on all levels to the grid.</div><div class="ttdef"><b>Definition:</b> local_regrid.cpp:202</div></div>
<div class="ttc" id="aclasssledgehamr_1_1Sledgehamr_html"><div class="ttname"><a href="classsledgehamr_1_1Sledgehamr.html">sledgehamr::Sledgehamr</a></div><div class="ttdoc">Abstract base class for all derived projects. Combines all the ingredients to make this code work.</div><div class="ttdef"><b>Definition:</b> sledgehamr.h:40</div></div>
<div class="ttc" id="alocation_8h_html"><div class="ttname"><a href="location_8h.html">location.h</a></div></div>
<div class="ttc" id="anamespacesledgehamr_html"><div class="ttname"><a href="namespacesledgehamr.html">sledgehamr</a></div><div class="ttdef"><b>Definition:</b> fill_level.cpp:8</div></div>
<div class="ttc" id="asledgehamr_8h_html"><div class="ttname"><a href="sledgehamr_8h.html">sledgehamr.h</a></div></div>
<div class="ttc" id="aunique__layout_8h_html"><div class="ttname"><a href="unique__layout_8h.html">unique_layout.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
